<div class="modal-transp-container">
  <div class="modal-transp">
    <h2 *ngIf="addTicketServ.action == 'add'">
      Add a new Ticket to {{ fireService.currentBoard?.title }}
    </h2>
    <h2 *ngIf="addTicketServ.action == 'edit'">Edit Ticket</h2>
    <form *ngIf="addTicketServ.ticket" (ngSubmit)="saveTicket()" #ticketForm="ngForm">
      <div class="form-input">
        <label for="">Title</label>
        <input
          type="text"
          name="title"
          class="input"
          [(ngModel)]="addTicketServ.ticket.title"
          required
          minlength="1"
          placeholder="Ticket Title*"
        />
      </div>
      <div class="form-input">
        <label for="">Description</label>
        <textarea
          type="text"
          name="description"
          class="input textarea"
          [(ngModel)]="addTicketServ.ticket.description"
          required
          minlength="1"
          placeholder="Ticket Description*"
        ></textarea>
        <!--          cols="30"
                   rows="10" -->
      </div>

      <div class="form-input category-select">
        <label for="">Category</label>
        <select
          *ngIf="
            fireService.currentBoard &&
            fireService.currentBoard.categories.length > 0
          "
          name="category"
          class="input"
          id=""
          [(ngModel)]="ticketCategory"
          (click)="toggleCategoryColor($event)"
          #select
        >
          <option
            *ngFor="let category of categories"
            value="{{ category.category }}"
          >
            {{ category.category }}
          </option>
        </select>
        <span
          style="font-size: 13px"
          *ngIf="
            fireService.currentBoard &&
            fireService.currentBoard.categories.length == 0
          "
          >You did not add any categories to this board yet</span
        >
<!--         <div
          *ngIf="
            fireService.currentBoard &&
            fireService.currentBoard.categories.length > 0 &&
            colorsAreOpen
          "
          class="category-colors"
          [style.bottom.px]="-(categories.length * 29 + 1)"
        >
          <div
            class="color-container"
            [style.height.px]="categories.length * 29"
          >
            <span
              *ngFor="let category of categories"
              [style.backgroundColor]="category.color"
              class="category-color-span"
            ></span>
          </div>
        </div> -->
      </div>
      <div class="form-input">
        <label for="">Priority</label>
        <select
          name="priority"
          class="input"
          id=""
          [(ngModel)]="addTicketServ.ticket.priority"
        >
          <option>High</option>
          <option>Middle</option>
          <option>Low</option>
        </select>
      </div>
      <div class="form-input">
        <label for="">Deadline</label>
        <input
          type="date"
          name="deadline"
          class="input"
          [min]="getMinDate()"
          [(ngModel)]="addTicketServ.ticket.deadline"
        />
      </div>
      <!--       <div class="form-input">
        <label for="">Add responsibles</label>
        <input type="text" class="input" placeholder="Add users" />
      </div> -->
      <div class="btn-container">
        <button
          class="btn btn-light"
          (click)="addTicketServ.closeModal()"
          [disabled]="addTicketServ.isSavingTicket"
        >
          Cancel
        </button>
        <input
          type="submit"
          class="btn"
          [value]="
            addTicketServ.action == 'add' ? 'Add Ticket' : 'Save Changes'
          "
          [disabled]="!ticketForm.valid || addTicketServ.isSavingTicket"
        />
      </div>
    </form>

    <app-loading-bar *ngIf="addTicketServ.isSavingTicket"></app-loading-bar>
  </div>
</div>
